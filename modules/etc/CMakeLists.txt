
add_env(etc-env
	COMPONENTS
		modules-env
)

add_module_lib(etc-lib
	TOOLS_DEPENDENT
	COMPONENTS
		etc-env
		warnings-env
)

set(__THIRDPARTY_ETC_PATH "${GODOT_SOURCE_DIR}/thirdparty/etc2comp")

target_include_directories(etc-env INTERFACE "${__THIRDPARTY_ETC_PATH}")

add_lib(thirdparty-etc-lib
	PARENT_LIB
		etc-lib
	COMPONENTS
		etc-env
)

# Thirdparty source files
# Not unbundled so far since not widespread as shared library
target_sources(thirdparty-etc-lib PRIVATE 
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding_ETC1.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding_R11.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding_RG11.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding_RGB8A1.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding_RGB8.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcBlock4x4Encoding_RGBA8.cpp"
	"${__THIRDPARTY_ETC_PATH}/Etc.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcDifferentialTrys.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcFilter.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcImage.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcIndividualTrys.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcMath.cpp"
	"${__THIRDPARTY_ETC_PATH}/EtcSortedBlockList.cpp"
)

# Godot source files
target_glob_sources(etc-lib PRIVATE "*.cpp")
